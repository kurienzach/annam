/*! MyLib.js 1.0.0 | Aurelio De Rosa (@AurelioDeRosa) | MIT Licensed */
function update_location(a){$(".location-label span span").html(a),$("#txtlocation").val(a),$(".location-select-modal").toggle(),$("#updatelocation").submit()}function init_cart_add(){$(".input-number").change(function(){valueCurrent>=minValue&&valueCurrent<=maxValue&&(0==valueCurrent?remove_from_cart($(this).closest(".iconBox").find(".dish-id").text(),$(this).val()):add_to_cart($(this).closest(".iconBox").find(".dish-id").text(),$(this).val()),$(".add-cart").text(cart.length),sync_cart_server())})}function render_dishes(a){$dish_div.empty(),_.each(dishes,function(b){b.categories.indexOf(a)>-1&&($dish=$(dish_template({dish:b})),cart_index=search_in_cart(b.id),cart_index>=0&&$dish.find(".input-number").val(cart[cart_index].qty),$dish_div.append($dish))}),init_cart_controls(),init_cart_add()}function get_dish(a){for(i=0;i<dishes.length;i++)if(dishes[i].id==a)return dishes[i]}function add_to_cart(a,b){var c,d=search_in_cart(a),e="added to";-1==d?(c=get_dish(a),cart.push({id:a,date:menu_date,category:menu_category,name:c.name,price:c.price,qty:b}),$alert=$('<div class="alert alert-success" style="display:none">'+c.name+" added to your cart</div>"),$(".alert-box").append($alert),$alert.fadeIn(),setInterval(function(){$alert.slideUp()},2e3)):(cart[d].qty<b&&(e="removed from"),cart[d].qty=b,c=cart[d])}function remove_from_cart(a){var b=search_in_cart(a);-1!=b&&($alert=$('<div class="alert alert-success" style="display:none">'+cart[b].name+" removed from  your cart</div>"),$(".alert-box").append($alert),$alert.fadeIn(),setInterval(function(){$alert.slideUp()},2e3),cart.splice(b,1))}function search_in_cart(a){for(i=0;i<cart.length;i++)if(cart[i].id==a&&cart[i].date==menu_date&&cart[i].category==menu_category)return i;return-1}$(document).ready(function(){dish_template=_.template($("#menu_item_template").html()),$dish_div=$(".dishes-holder"),hour=current_hour,$(".category-select").click(function(){var a=$(this).val();if(menu_date==today_date)switch(a){case"Breakfast":if(current_hour>=10)return alert("You can't order Breakfast now"),!1;break;case"Lunch":if(current_hour>=14)return alert("You can't order Lunch now"),!1;break;case"Dinner":if(current_hour>=21)return alert("You can't order Dinner now"),!1}checkedState=$(this).prop("checked"),void 0==checkedState?checkedState=!1:0==checkedState&&(checkedState=!0),$(".category-select:checked").each(function(){$(this).prop("checked",!1)}),$(this).prop("checked",checkedState),menu_category=a,$(".select-category-text").hide(),render_dishes($(this).val())}),$(".menu-date-select").click(function(){menu_date=$(this).data("date"),$(".dishes-holder").empty(),$(".category-select").prop("checked",!1),$(".select-category-text").html("Please select time of order to see menu for "+menu_date),$(".select-category-text").show()}),$(".add-cart").text(cart.length),$(".update_loc").click(function(){update_location($(this).prev().val())}),$("#updatelocation").ajaxForm({success:function(a){console.log("Location updated with server\n"+a)}})});
//# sourceMappingURL=menu.js.map